<mujoco model="rocker_bogie">
  <compiler angle="degree" inertiafromgeom="true" autolimits="true"/>
  <option timestep="0.002" gravity="0 0 -9.81" solver="Newton" iterations="120"/>

  <default>
    <geom condim="4" friction="1.3 0.01 0.0001" solref="0.004 1" solimp="0.95 0.99 0.001"
          contype="0" conaffinity="0"/>
    <joint damping="2" armature="0.02" limited="false"/>
  </default>

  <asset>
    <material name="mat_chassis" rgba="0.25 0.25 0.30 1"/>
    <material name="mat_rocker"  rgba="0.45 0.45 0.65 1"/>
    <material name="mat_bogie"   rgba="0.40 0.55 0.40 1"/>
    <material name="mat_wheel"   rgba="0.05 0.05 0.05 1"/>
    <material name="mat_skid"    rgba="0.20 0.20 0.20 0.6"/>
  </asset>

  <worldbody>
    <body name="chassis" pos="0 0 0.35">
      <joint name="slide_x" type="slide" axis="1 0 0" damping="1.0"/>
      <joint name="slide_y" type="slide" axis="0 1 0" damping="1.0"/>
      <joint name="slide_z" type="slide" axis="0 0 1" damping="2.0"/>

      <joint name="roll"  type="hinge" axis="1 0 0" damping="4.0" limited="true" range="-20 20"/>
      <joint name="pitch" type="hinge" axis="0 1 0" damping="4.0" limited="true" range="-20 20"/>
      <joint name="yaw"   type="hinge" axis="0 0 1" damping="1.0"/>

      <inertial pos="0 0 -0.03" mass="8.0" diaginertia="0.25 0.55 0.55"/>

      <!-- кузов визуальный, НЕ контактит -->
      <geom type="box" size="0.22 0.14 0.05" material="mat_chassis"
            contype="0" conaffinity="0"/>

      <!-- ========== LEFT ========== -->
      <body name="rocker_L" pos="0 0.16 0">
        <joint name="rocker_L_j" type="hinge" axis="0 1 0" damping="8" limited="true" range="-35 35"/>

        <geom type="capsule" fromto="0 0 0   0.288 0 -0.04" size="0.015" density="500"
              material="mat_rocker" contype="0" conaffinity="0"/>
        <geom type="capsule" fromto="0 0 0   -0.096 0 -0.06" size="0.015" density="500"
              material="mat_rocker" contype="0" conaffinity="0"/>

        <body name="wheel_front_L" pos="0.288 0 -0.116">
          <joint name="wheel_front_L_j" type="hinge" axis="0 1 0" damping="0.4" armature="0.01"/>
          <geom type="sphere" size="0.076" material="mat_wheel"
                contype="1" conaffinity="1"/>
        </body>

        <body name="bogie_L" pos="-0.096 0 -0.06">
          <joint name="bogie_L_j" type="hinge" axis="0 1 0" damping="10" limited="true" range="-70 70"/>

          <geom type="capsule" fromto="0 0 0   0.096 0 0.03" size="0.013" density="550"
                material="mat_bogie" contype="0" conaffinity="0"/>
          <geom type="capsule" fromto="0 0 0   -0.232 0 0.03" size="0.013" density="550"
                material="mat_bogie" contype="0" conaffinity="0"/>

          <body name="wheel_mid_L" pos="0.096 0 -0.046">
            <joint name="wheel_mid_L_j" type="hinge" axis="0 1 0" damping="0.4" armature="0.01"/>
            <geom type="sphere" size="0.076" material="mat_wheel"
                  contype="1" conaffinity="1"/>
          </body>

          <body name="wheel_rear_L" pos="-0.232 0 -0.046">
            <joint name="wheel_rear_L_j" type="hinge" axis="0 1 0" damping="0.4" armature="0.01"/>
            <geom type="sphere" size="0.076" material="mat_wheel"
                  contype="1" conaffinity="1"/>
          </body>
        </body>
      </body>

      <!-- ========== RIGHT ========== -->
      <body name="rocker_R" pos="0 -0.16 0">
        <joint name="rocker_R_j" type="hinge" axis="0 1 0" damping="8" limited="true" range="-35 35"/>

        <geom type="capsule" fromto="0 0 0   0.288 0 -0.04" size="0.015" density="500"
              material="mat_rocker" contype="0" conaffinity="0"/>
        <geom type="capsule" fromto="0 0 0   -0.096 0 -0.06" size="0.015" density="500"
              material="mat_rocker" contype="0" conaffinity="0"/>

        <body name="wheel_front_R" pos="0.288 0 -0.116">
          <joint name="wheel_front_R_j" type="hinge" axis="0 1 0" damping="0.4" armature="0.01"/>
          <geom type="sphere" size="0.076" material="mat_wheel"
                contype="1" conaffinity="1"/>
        </body>

        <body name="bogie_R" pos="-0.096 0 -0.06">
          <joint name="bogie_R_j" type="hinge" axis="0 1 0" damping="10" limited="true" range="-70 70"/>

          <geom type="capsule" fromto="0 0 0   0.096 0 0.03" size="0.013" density="550"
                material="mat_bogie" contype="0" conaffinity="0"/>
          <geom type="capsule" fromto="0 0 0   -0.232 0 0.03" size="0.013" density="550"
                material="mat_bogie" contype="0" conaffinity="0"/>

          <body name="wheel_mid_R" pos="0.096 0 -0.046">
            <joint name="wheel_mid_R_j" type="hinge" axis="0 1 0" damping="0.4" armature="0.01"/>
            <geom type="sphere" size="0.076" material="mat_wheel"
                  contype="1" conaffinity="1"/>
          </body>

          <body name="wheel_rear_R" pos="-0.232 0 -0.046">
            <joint name="wheel_rear_R_j" type="hinge" axis="0 1 0" damping="0.4" armature="0.01"/>
            <geom type="sphere" size="0.076" material="mat_wheel"
                  contype="1" conaffinity="1"/>
          </body>
        </body>
      </body>

    </body>
  </worldbody>

  <actuator>
    <position name="diff_pitch" joint="pitch" kp="900" kv="80" forcerange="-250 250"/>
    <position name="diff_roll"  joint="roll"  kp="900" kv="80" forcerange="-250 250"/>

    <motor joint="wheel_front_L_j" gear="40"/>
    <motor joint="wheel_mid_L_j"   gear="40"/>
    <motor joint="wheel_rear_L_j"  gear="40"/>
    <motor joint="wheel_front_R_j" gear="40"/>
    <motor joint="wheel_mid_R_j"   gear="40"/>
    <motor joint="wheel_rear_R_j"  gear="40"/>
  </actuator>
</mujoco>
